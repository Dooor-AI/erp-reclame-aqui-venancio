{"openapi":"3.1.0","info":{"title":"Venâncio RPA API","description":"API para gerenciamento de reclamaÃ§Ãµes da VenÃ¢ncio no Reclame Aqui","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"Root endpoint","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health","description":"Health check endpoint","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/scrape/run":{"post":{"summary":"Run Scraper Manually","description":"Manually trigger scraping job (for testing)\n\nThis will run the scraper in the background and return immediately.\nCheck logs for scraping progress.","operationId":"run_scraper_manually_scrape_run_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/complaints/":{"get":{"tags":["complaints"],"summary":"List Complaints","description":"List complaints with optional filters\n\n- **skip**: Number of records to skip (pagination)\n- **limit**: Maximum number of records to return\n- **sentiment**: Filter by sentiment (Negativo, Neutro, Positivo)\n- **status**: Filter by status (Respondida, NÃ£o respondida, Resolvida)","operationId":"list_complaints_complaints__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"sentiment","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sentiment"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Complaint"},"title":"Response List Complaints Complaints  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["complaints"],"summary":"Create Complaint Endpoint","description":"Create a new complaint manually (for testing purposes)\n\nIn production, complaints are created automatically by the scraper","operationId":"create_complaint_endpoint_complaints__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComplaintCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Complaint"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/complaints/stats":{"get":{"tags":["complaints"],"summary":"Get Stats","description":"Get statistics about complaints\n\nReturns counts by sentiment, status, category and average urgency score","operationId":"get_stats_complaints_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComplaintStats"}}}}}}},"/complaints/{complaint_id}":{"get":{"tags":["complaints"],"summary":"Get Complaint Detail","description":"Get detailed information about a specific complaint\n\n- **complaint_id**: The ID of the complaint","operationId":"get_complaint_detail_complaints__complaint_id__get","parameters":[{"name":"complaint_id","in":"path","required":true,"schema":{"type":"integer","title":"Complaint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Complaint"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/complaints/{complaint_id}/analysis":{"patch":{"tags":["complaints"],"summary":"Update Analysis","description":"Update complaint with AI analysis data (used by Chat B)\n\n- **complaint_id**: The ID of the complaint\n- **sentiment**: Sentiment classification\n- **sentiment_score**: Sentiment score (0-10)\n- **urgency_score**: Urgency score (0-10)\n- **classification**: List of categories\n- **entities**: Extracted entities","operationId":"update_analysis_complaints__complaint_id__analysis_patch","parameters":[{"name":"complaint_id","in":"path","required":true,"schema":{"type":"integer","title":"Complaint Id"}},{"name":"sentiment","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sentiment"}},{"name":"sentiment_score","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sentiment Score"}},{"name":"urgency_score","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Urgency Score"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_update_analysis_complaints__complaint_id__analysis_patch"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/complaints/{complaint_id}/response":{"patch":{"tags":["complaints"],"summary":"Update Response","description":"Update complaint with response data (used by Chat C)\n\n- **complaint_id**: The ID of the complaint\n- **response_generated**: AI-generated response\n- **response_edited**: Manually edited response\n- **coupon_code**: Generated coupon code\n- **coupon_discount**: Discount percentage","operationId":"update_response_complaints__complaint_id__response_patch","parameters":[{"name":"complaint_id","in":"path","required":true,"schema":{"type":"integer","title":"Complaint Id"}},{"name":"response_generated","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response Generated"}},{"name":"response_edited","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response Edited"}},{"name":"coupon_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Coupon Code"}},{"name":"coupon_discount","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Coupon Discount"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analytics/analyze/{complaint_id}":{"post":{"tags":["analytics"],"summary":"Analyze Complaint","description":"Analisar uma reclamaÃ§Ã£o especÃ­fica\n\nExecuta o pipeline completo:\n- AnÃ¡lise de sentimento\n- ClassificaÃ§Ã£o por categoria\n- ExtraÃ§Ã£o de entidades\n- CÃ¡lculo de score de urgÃªncia","operationId":"analyze_complaint_analytics_analyze__complaint_id__post","parameters":[{"name":"complaint_id","in":"path","required":true,"schema":{"type":"integer","title":"Complaint Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analytics/analyze/batch":{"post":{"tags":["analytics"],"summary":"Analyze Batch","description":"Analisar todas as reclamaÃ§Ãµes nÃ£o analisadas (ou atÃ© o limite especificado)\n\nRetorna estatÃ­sticas sobre o processo de anÃ¡lise em lote.","operationId":"analyze_batch_analytics_analyze_batch_post","parameters":[{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Limite de reclamaÃ§Ãµes a analisar","title":"Limit"},"description":"Limite de reclamaÃ§Ãµes a analisar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analytics/stats/sentiment":{"get":{"tags":["analytics"],"summary":"Sentiment Stats","description":"EstatÃ­sticas de sentimento\n\nRetorna contagem e score mÃ©dio por sentimento (Negativo, Neutro, Positivo)","operationId":"sentiment_stats_analytics_stats_sentiment_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/analytics/stats/categories":{"get":{"tags":["analytics"],"summary":"Category Stats","description":"EstatÃ­sticas de categorias\n\nRetorna contagem de reclamaÃ§Ãµes por categoria\n(incluindo categorias mÃºltiplas)","operationId":"category_stats_analytics_stats_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/analytics/stats/urgency":{"get":{"tags":["analytics"],"summary":"Urgency Stats","description":"ReclamaÃ§Ãµes mais urgentes\n\nRetorna reclamaÃ§Ãµes com alto score de urgÃªncia (padrÃ£o >= 7.0)","operationId":"urgency_stats_analytics_stats_urgency_get","parameters":[{"name":"min_score","in":"query","required":false,"schema":{"type":"number","description":"Score mÃ­nimo de urgÃªncia","default":7.0,"title":"Min Score"},"description":"Score mÃ­nimo de urgÃªncia"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","description":"NÃºmero mÃ¡ximo de resultados","default":10,"title":"Limit"},"description":"NÃºmero mÃ¡ximo de resultados"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analytics/stats/overview":{"get":{"tags":["analytics"],"summary":"Stats Overview","description":"VisÃ£o geral de todas as estatÃ­sticas\n\nCombina mÃ©tricas de sentimento, categorias, urgÃªncia e anÃ¡lise geral","operationId":"stats_overview_analytics_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_update_analysis_complaints__complaint_id__analysis_patch":{"properties":{"classification":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Classification"},"entities":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Entities"}},"type":"object","title":"Body_update_analysis_complaints__complaint_id__analysis_patch"},"Complaint":{"properties":{"title":{"type":"string","title":"Title"},"text":{"type":"string","title":"Text"},"user_name":{"type":"string","title":"User Name"},"complaint_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Complaint Date"},"status":{"type":"string","title":"Status","default":"NÃ£o respondida"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"id":{"type":"integer","title":"Id"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"},"sentiment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sentiment"},"sentiment_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sentiment Score"},"urgency_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Urgency Score"},"classification":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Classification"},"entities":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Entities"},"response_generated":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response Generated"},"coupon_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Coupon Code"},"coupon_discount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Coupon Discount"},"response_sent":{"type":"boolean","title":"Response Sent","default":false},"scraped_at":{"type":"string","format":"date-time","title":"Scraped At"},"analyzed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Analyzed At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["title","text","user_name","id","scraped_at","created_at"],"title":"Complaint","description":"Schema for returning complaint data"},"ComplaintCreate":{"properties":{"title":{"type":"string","title":"Title"},"text":{"type":"string","title":"Text"},"user_name":{"type":"string","title":"User Name"},"complaint_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Complaint Date"},"status":{"type":"string","title":"Status","default":"NÃ£o respondida"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"}},"type":"object","required":["title","text","user_name"],"title":"ComplaintCreate","description":"Schema for creating a new complaint"},"ComplaintStats":{"properties":{"total":{"type":"integer","title":"Total"},"by_sentiment":{"additionalProperties":{"type":"integer"},"type":"object","title":"By Sentiment","default":{}},"by_status":{"additionalProperties":{"type":"integer"},"type":"object","title":"By Status","default":{}},"by_category":{"additionalProperties":{"type":"integer"},"type":"object","title":"By Category","default":{}},"avg_urgency":{"type":"number","title":"Avg Urgency","default":0.0}},"type":"object","required":["total"],"title":"ComplaintStats","description":"Schema for statistics"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}